<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {%- include head.html -%}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Karla:ital,wght@0,200..800;1,200..800&family=Lora:ital,wght@0,400..700;1,400..700&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=STIX+Two+Text:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
  <!-- Add Font Awesome for social icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <style>
    body {
      /* font-family: "Karla", serif; */
      font-family: "Lora", serif;
      /* font-family: "STIX Two Text", serif; */
      /* font-family: "Bentham", serif; */
      /* font-family: 'Nunito', sans-serif; */
      font-optical-sizing: auto;
      font-size: large;
      font-weight: 400;
      font-style: normal;
    }
  </style>

  <body>

    {%- include header.html -%}

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    {%- include footer.html -%}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- D3.js for visualizations -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Copy Code Script -->
    <script src="{{ '/assets/scripts/copyCode.js' | relative_url }}"></script>
    <!-- Back to Top Script -->
    <script src="{{ '/assets/scripts/backToTop.js' | relative_url }}"></script>
    <!-- Table of Contents Script -->
    <script src="{{ '/assets/scripts/toc.js' | relative_url }}"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // More specific selector to target all links in content areas
        const contentLinks = document.querySelectorAll(`
          .post-content a,
          .note a,
          .latest-post-card a,
          .blog-post a,
          .thought-post a,
          article a
        `);
        
        contentLinks.forEach(link => {
          // Exclude certain links that should stay in the same tab
          const excludedClasses = ['page-link', 'read-more', 'site-title', 'social-links'];
          const isExcluded = excludedClasses.some(className => 
            link.classList.contains(className) || 
            link.closest(`.${className}`)
          );
          
          if (!isExcluded) {
            // Add target="_blank" and rel attributes
            link.setAttribute('target', '_blank');
            link.setAttribute('rel', 'noopener noreferrer');
            
            // Add a class to track visited state
            link.classList.add('content-link');
          }
        });
      });
    </script>

  </body>

</html>